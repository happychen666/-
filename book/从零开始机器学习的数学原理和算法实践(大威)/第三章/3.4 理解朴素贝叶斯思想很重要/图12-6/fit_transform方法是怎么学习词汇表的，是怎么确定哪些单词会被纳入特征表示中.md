在 `CountVectorizer` 中，`fit_transform` 方法学习词汇表并确定哪些单词被纳入特征表示主要通过以下步骤：

1. 文本分词
   - 首先，对输入的文本数据进行分词处理。对于英文文本，通常以空格、标点等为分隔符将文本拆分成一个个单词。对于其他语言可能需要更复杂的分词方法。

2. 词汇收集
   - 遍历所有的文本样本，将每个样本中的单词收集起来。在这个过程中，会记录每个单词出现的次数和位置等信息。

3. 词汇筛选
   - 根据一些规则对收集到的词汇进行筛选。通常，会去除一些非常常见但信息量较少的单词（例如英语中的“the”“a”“an”等停用词），这些单词在不同的文本中出现频率很高，但对于区分文本的类别往往贡献不大。
   - 也可以设置一些其他的筛选条件，比如只保留出现频率高于一定阈值的单词，或者只保留长度大于一定值的单词等。

4. 构建词汇表
   - 将筛选后的单词按照一定的顺序（比如字母顺序）排列，构建一个词汇表。这个词汇表中的每个单词都对应一个唯一的整数索引。

5. 特征表示
   - 对于每个文本样本，根据词汇表将其表示为一个特征向量。如果某个单词在文本中出现，那么对应词汇表中该单词的索引位置上的值就会增加。通常使用词频作为特征值，即某个单词在文本中出现的次数。也可以使用其他的表示方法，比如二进制表示（单词出现为 1，不出现为 0）或者 TF-IDF 值等。

例如，假设有以下两个文本样本：
“the cat is on the mat” 和 “a dog is under the table”。

经过分词和词汇收集后，得到的单词有“the”“cat”“is”“on”“mat”“a”“dog”“under”“table”。

去除停用词“the”和“a”后，筛选后的词汇为“cat”“is”“on”“mat”“dog”“under”“table”。构建词汇表后，假设得到的索引对应关系为：“cat”->0、“is”->1、“on”->2、“mat”->3、“dog”->4、“under”->5、“table”->6。

那么第一个文本样本就可以表示为特征向量 [1, 1, 1, 1, 0, 0, 0]，分别对应“cat”“is”“on”“mat”“dog”“under”“table”在该文本中的出现情况。第二个文本样本可以表示为 [0, 1, 0, 0, 1, 1, 1]。
